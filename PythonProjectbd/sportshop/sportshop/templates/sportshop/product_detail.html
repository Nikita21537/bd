{% extends 'sportshop/base.html' %}
{% load static %}

{% block content %}
<div class="product-detail-container">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <div class="product-breadcrumbs">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a> &gt; 
        <a href="{% url 'catalog' %}">–ö–∞—Ç–∞–ª–æ–≥</a> &gt; 
        {% if product.category %}
        <a href="{% url 'catalog' %}?category={{ product.category.id }}">{{ product.category.name }}</a> &gt; 
        {% endif %}
        <span>{{ product.name|truncatechars:30 }}</span>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="product-main">
        <div class="product-images">
            <div class="main-image">
                {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                {% else %}
                    <div class="no-image-placeholder-large">
                        <i class="fas fa-image"></i>
                        <span>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</span>
                    </div>
                {% endif %}
            </div>
            
            {% if product.additional_images.all %}
            <div class="thumbnails">
                {% for image in product.additional_images.all %}
                    {% if image.image %}
                    <img src="{{ image.image.url }}" alt="{{ image.alt_text|default:product.name }}">
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <div class="product-info">
            <h1>{{ product.name }}</h1>
            
            <div class="product-meta">
                <span class="rating">
                    ‚òÖ {{ product.rating|default:"0.0" }}
                    <small>({{ product.reviews.count|default:"0" }} –æ—Ç–∑—ã–≤–æ–≤)</small>
                </span>
                <span class="views">
                    üëÅ {{ product.views|default:"0" }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
                </span>
                <span class="sku">
                    –ê—Ä—Ç–∏–∫—É–ª: {{ product.sku|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}
                </span>
            </div>

            <div class="product-price">
                {% if product.discount_price %}
                <div class="price-old">{{ product.price|default:"0" }} ‚ÇΩ</div>
                <div class="price-new">{{ product.discount_price|default:"0" }} ‚ÇΩ</div>
                <div class="discount-badge">-{{ product.get_discount_percentage|default:"0" }}%</div>
                {% else %}
                <div class="price-current">{{ product.price|default:"0" }} ‚ÇΩ</div>
                {% endif %}
            </div>

            <div class="product-availability">
                {% if product.in_stock %}
                <span class="in-stock">‚úì –í –Ω–∞–ª–∏—á–∏–∏</span>
                <small>–ù–∞ —Å–∫–ª–∞–¥–µ: {{ product.stock_quantity|default:"0" }} —à—Ç.</small>
                {% else %}
                <span class="out-of-stock">‚úó –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</span>
                {% endif %}
            </div>

            <div class="product-actions">
                {% if product.in_stock %}
                <button class="btn-add-to-cart" data-product-id="{{ product.id }}">
                    <i class="fas fa-shopping-cart"></i> –í –∫–æ—Ä–∑–∏–Ω—É
                </button>
                <button class="btn-buy-now" data-product-id="{{ product.id }}">
                    –ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å
                </button>
                {% else %}
                <button class="btn-notify" disabled>
                    –£–≤–µ–¥–æ–º–∏—Ç—å –æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏
                </button>
                {% endif %}
            </div>

            {% if product.short_description %}
            <div class="product-short-description">
                {{ product.short_description }}
            </div>
            {% endif %}

            <div class="product-details-table">
                <table>
                    <tr>
                        <td>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</td>
                        <td>{{ product.category.name|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</td>
                    </tr>
                    <tr>
                        <td>–ë—Ä–µ–Ω–¥</td>
                        <td>{{ product.brand|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</td>
                    </tr>
                    <tr>
                        <td>–ê—Ä—Ç–∏–∫—É–ª</td>
                        <td>{{ product.sku|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</td>
                    </tr>
                    {% if product.weight %}
                    <tr>
                        <td>–í–µ—Å</td>
                        <td>{{ product.weight }} –∫–≥</td>
                    </tr>
                    {% endif %}
                    {% if product.dimensions %}
                    <tr>
                        <td>–†–∞–∑–º–µ—Ä—ã</td>
                        <td>{{ product.dimensions }}</td>
                    </tr>
                    {% endif %}
                    {% if product.material %}
                    <tr>
                        <td>–ú–∞—Ç–µ—Ä–∏–∞–ª</td>
                        <td>{{ product.material }}</td>
                    </tr>
                    {% endif %}
                </table>
            </div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="product-tabs">
        <div class="tab-buttons">
            <button class="tab-button active" data-tab="description">–û–ø–∏—Å–∞–Ω–∏–µ</button>
            <button class="tab-button" data-tab="specifications">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</button>
            <button class="tab-button" data-tab="reviews">–û—Ç–∑—ã–≤—ã ({{ product.reviews.count|default:"0" }})</button>
            <button class="tab-button" data-tab="delivery">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç</button>
        </div>

        <div class="tab-content">
            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="tab-pane active" id="description">
                {{ product.description|linebreaks|default:"–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç." }}
            </div>
            
            <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
            <div class="tab-pane" id="specifications">
                <h3>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                <table class="specs-table">
                    {% if product.brand %}
                    <tr>
                        <td>–ë—Ä–µ–Ω–¥</td>
                        <td>{{ product.brand }}</td>
                    </tr>
                    {% endif %}
                    {% if product.material %}
                    <tr>
                        <td>–ú–∞—Ç–µ—Ä–∏–∞–ª</td>
                        <td>{{ product.material }}</td>
                    </tr>
                    {% endif %}
                    {% if product.weight %}
                    <tr>
                        <td>–í–µ—Å</td>
                        <td>{{ product.weight }} –∫–≥</td>
                    </tr>
                    {% endif %}
                    {% if product.dimensions %}
                    <tr>
                        <td>–†–∞–∑–º–µ—Ä—ã</td>
                        <td>{{ product.dimensions }}</td>
                    </tr>
                    {% endif %}
                    {% if product.sku %}
                    <tr>
                        <td>–ê—Ä—Ç–∏–∫—É–ª</td>
                        <td>{{ product.sku }}</td>
                    </tr>
                    {% endif %}
                    {% if product.category %}
                    <tr>
                        <td>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</td>
                        <td>{{ product.category.name }}</td>
                    </tr>
                    {% endif %}
                </table>
                
                {% if not product.brand and not product.material and not product.weight and not product.dimensions %}
                <p class="no-specs">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ —É–∫–∞–∑–∞–Ω—ã.</p>
                {% endif %}
            </div>
            
            <!-- –û—Ç–∑—ã–≤—ã -->
            <div class="tab-pane" id="reviews">
                <div class="reviews-header">
                    <h3>–û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h3>
                    <div class="average-rating">
                        –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: <strong>{{ product.get_average_rating|default:"0.0" }}</strong> –∏–∑ 5
                    </div>
                </div>
                
                {% if user.is_authenticated %}
                <div class="add-review-form">
                    <h4>–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h4>
                    <form id="review-form" data-product-id="{{ product.id }}">
                        <div class="rating-stars">
                            <span>–û—Ü–µ–Ω–∫–∞:</span>
                            {% for i in "54321" %}
                            <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}">
                            <label for="star{{ i }}">‚òÖ</label>
                            {% endfor %}
                        </div>
                        <textarea name="comment" placeholder="–í–∞—à –æ—Ç–∑—ã–≤..." required></textarea>
                        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
                    </form>
                </div>
                {% else %}
                <p class="login-prompt">
                    <a href="{% url 'login' %}">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
                </p>
                {% endif %}
                
                <div class="reviews-list">
                    {% for review in reviews %}
                    <div class="review-item">
                        <div class="review-header">
                            <strong>{{ review.user.username|default:"–ê–Ω–æ–Ω–∏–º" }}</strong>
                            <div class="review-rating">
                                {% for i in "12345" %}
                                    {% if forloop.counter <= review.rating %}‚òÖ{% else %}‚òÜ{% endif %}
                                {% endfor %}
                            </div>
                            <span class="review-date">{{ review.created_at|date:"d.m.Y" }}</span>
                        </div>
                        <div class="review-comment">
                            {{ review.comment|linebreaks }}
                        </div>
                        {% if review.advantages %}
                        <div class="review-pros">
                            <strong>–î–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞:</strong> {{ review.advantages }}
                        </div>
                        {% endif %}
                        {% if review.disadvantages %}
                        <div class="review-cons">
                            <strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong> {{ review.disadvantages }}
                        </div>
                        {% endif %}
                    </div>
                    {% empty %}
                    <p class="no-reviews">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
                    {% endfor %}
                </div>
            </div>
            
            <!-- –î–æ—Å—Ç–∞–≤–∫–∞ -->
            <div class="tab-pane" id="delivery">
                <h3>–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç</h3>
                <div class="delivery-info">
                    <h4>–°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏:</h4>
                    <ul>
                        <li><strong>–°–∞–º–æ–≤—ã–≤–æ–∑</strong> - –±–µ—Å–ø–ª–∞—Ç–Ω–æ</li>
                        <li><strong>–ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</strong> - 300 ‚ÇΩ</li>
                        <li><strong>–ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏</strong> - 250 ‚ÇΩ</li>
                        <li><strong>–°–î–≠–ö</strong> - 350 ‚ÇΩ</li>
                    </ul>
                    
                    <h4>–°—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏:</h4>
                    <ul>
                        <li>–ú–æ—Å–∫–≤–∞ –∏ –æ–±–ª–∞—Å—Ç—å: 1-2 –¥–Ω—è</li>
                        <li>–î—Ä—É–≥–∏–µ —Ä–µ–≥–∏–æ–Ω—ã: 3-10 –¥–Ω–µ–π</li>
                    </ul>
                    
                    <h4>–í–æ–∑–≤—Ä–∞—Ç:</h4>
                    <p>–í–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞ –≤–æ–∑–º–æ–∂–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã -->
    {% if similar_products %}
    <div class="similar-products">
        <h2>–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã</h2>
        <div class="products-grid">
            {% for similar_product in similar_products %}
            <div class="product-card">
                <a href="{% url 'product_detail' similar_product.id %}" class="product-image">
                    {% if similar_product.image %}
                        <img src="{{ similar_product.image.url }}" alt="{{ similar_product.name }}">
                    {% else %}
                        <div class="no-image-placeholder">
                            <i class="fas fa-image"></i>
                            <span>–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                        </div>
                    {% endif %}
                    
                    {% if similar_product.discount_price %}
                    <span class="discount-badge">-{{ similar_product.get_discount_percentage|default:"0" }}%</span>
                    {% endif %}
                </a>
                
                <div class="product-info">
                    <a href="{% url 'product_detail' similar_product.id %}" class="product-name">
                        <h3>{{ similar_product.name|truncatechars:40 }}</h3>
                    </a>
                    
                    <div class="product-price">
                        {% if similar_product.discount_price %}
                        <span class="old-price">{{ similar_product.price|default:"0" }} ‚ÇΩ</span>
                        <span class="new-price">{{ similar_product.discount_price|default:"0" }} ‚ÇΩ</span>
                        {% else %}
                        <span class="price">{{ similar_product.price|default:"0" }} ‚ÇΩ</span>
                        {% endif %}
                    </div>
                    
                    <button class="btn-quick-add" data-product-id="{{ similar_product.id }}">
                        –í –∫–æ—Ä–∑–∏–Ω—É
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', function() {
            const tabId = this.dataset.tab;
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –ø–∞–Ω–µ–ª–µ–π
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
            this.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
    document.querySelectorAll('.btn-add-to-cart, .btn-quick-add').forEach(button => {
        button.addEventListener('click', function() {
            const productId = this.dataset.productId;
            addToCart(productId, 1, this);
        });
    });
    
    // –ö–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å"
    document.querySelector('.btn-buy-now')?.addEventListener('click', function() {
        const productId = this.dataset.productId;
        addToCart(productId, 1, this, true);
    });
    
    // –§–æ—Ä–º–∞ –æ—Ç–∑—ã–≤–∞
    document.getElementById('review-form')?.addEventListener('submit', function(e) {
        e.preventDefault();
        submitReview(this);
    });
});

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã
function addToCart(productId, quantity, button, buyNow = false) {
    const originalHTML = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
    button.disabled = true;
    
    fetch('/add-to-cart/' + productId + '/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify({ quantity: quantity })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
            updateCartCount(data.cart_count);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(data.message, 'success');
            
            // –ï—Å–ª–∏ —ç—Ç–æ –±—ã—Å—Ç—Ä–∞—è –ø–æ–∫—É–ø–∫–∞, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ –∫–æ—Ä–∑–∏–Ω—É
            if (buyNow) {
                setTimeout(() => {
                    window.location.href = '/checkout/';
                }, 1000);
            }
        } else {
            showNotification(data.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É', 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è', 'error');
    })
    .finally(() => {
        button.innerHTML = originalHTML;
        button.disabled = false;
    });
}

function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

function updateCartCount(count) {
    const cartCountElements = document.querySelectorAll('.cart-count');
    cartCountElements.forEach(el => {
        el.textContent = count;
        if (count > 0) {
            el.style.display = 'inline';
        }
    });
}

function showNotification(message, type = 'info') {
    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
        <div class="notification-content">
            <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
            <span>${message}</span>
        </div>
        <button class="notification-close">&times;</button>
    `;
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#28a745' : '#dc3545'};
        color: white;
        padding: 15px 20px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 10000;
        box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        animation: slideIn 0.3s ease-out;
    `;
    
    // –ê–Ω–∏–º–∞—Ü–∏—è
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    `;
    document.head.appendChild(style);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ DOM
    document.body.appendChild(notification);
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É
    notification.querySelector('.notification-close').addEventListener('click', () => {
        notification.remove();
    });
}
</script>

<style>
.product-detail-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.product-breadcrumbs {
    margin-bottom: 20px;
    font-size: 14px;
    color: #666;
}

.product-breadcrumbs a {
    color: #667eea;
    text-decoration: none;
}

.product-breadcrumbs a:hover {
    text-decoration: underline;
}

.product-breadcrumbs span {
    color: #333;
    font-weight: bold;
}

.product-main {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    margin-bottom: 40px;
}

.product-images {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.main-image {
    width: 100%;
    height: 400px;
    border-radius: 10px;
    overflow: hidden;
    background: #f8f9fa;
}

.main-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.no-image-placeholder-large {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #f8f9fa;
    color: #6c757d;
}

.no-image-placeholder-large i {
    font-size: 72px;
    margin-bottom: 20px;
    opacity: 0.5;
}

.no-image-placeholder-large span {
    font-size: 16px;
}

.thumbnails {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    padding: 10px 0;
}

.thumbnails img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 5px;
    cursor: pointer;
    border: 2px solid transparent;
}

.thumbnails img:hover {
    border-color: #667eea;
}

.product-info h1 {
    margin: 0 0 20px 0;
    font-size: 32px;
    color: #333;
}

.product-meta {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    font-size: 14px;
    color: #666;
}

.product-meta .rating {
    color: #ffc107;
    font-weight: bold;
}

.product-price {
    margin: 30px 0;
}

.price-old {
    text-decoration: line-through;
    color: #999;
    font-size: 20px;
    margin-right: 15px;
}

.price-new {
    color: #dc3545;
    font-size: 32px;
    font-weight: bold;
    margin-right: 15px;
}

.price-current {
    color: #333;
    font-size: 32px;
    font-weight: bold;
}

.discount-badge {
    display: inline-block;
    background: #dc3545;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: bold;
}

.product-availability {
    margin: 20px 0;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
}

.in-stock {
    color: #28a745;
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
}

.out-of-stock {
    color: #dc3545;
    font-weight: bold;
    display: block;
}

.product-availability small {
    color: #666;
    font-size: 12px;
}

.product-actions {
    display: flex;
    gap: 15px;
    margin: 30px 0;
}

.btn-add-to-cart, .btn-buy-now, .btn-notify {
    flex: 1;
    padding: 15px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.btn-add-to-cart {
    background: #28a745;
    color: white;
}

.btn-buy-now {
    background: #667eea;
    color: white;
}

.btn-notify {
    background: #6c757d;
    color: white;
    cursor: not-allowed;
}

.btn-add-to-cart:hover {
    background: #218838;
}

.btn-buy-now:hover {
    background: #5a67d8;
}

.product-short-description {
    margin: 20px 0;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    color: #666;
    font-size: 14px;
    line-height: 1.6;
}

.product-details-table {
    margin-top: 30px;
}

.product-details-table table {
    width: 100%;
    border-collapse: collapse;
}

.product-details-table td {
    padding: 12px 0;
    border-bottom: 1px solid #eee;
}

.product-details-table td:first-child {
    width: 40%;
    color: #666;
    font-weight: 500;
}

.product-tabs {
    margin: 40px 0;
}

.tab-buttons {
    display: flex;
    border-bottom: 2px solid #dee2e6;
    margin-bottom: 20px;
}

.tab-button {
    padding: 15px 30px;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    font-size: 16px;
    font-weight: 500;
    color: #666;
    cursor: pointer;
    transition: all 0.3s;
}

.tab-button:hover {
    color: #333;
}

.tab-button.active {
    color: #667eea;
    border-bottom-color: #667eea;
}

.tab-content {
    padding: 20px 0;
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

.specs-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.specs-table td {
    padding: 12px;
    border: 1px solid #dee2e6;
}

.specs-table td:first-child {
    background: #f8f9fa;
    font-weight: 500;
    width: 30%;
}

.no-specs {
    text-align: center;
    padding: 40px;
    color: #666;
    background: #f8f9fa;
    border-radius: 8px;
}

.reviews-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid #dee2e6;
}

.add-review-form {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 30px;
}

.rating-stars {
    margin-bottom: 15px;
}

.rating-stars input[type="radio"] {
    display: none;
}

.rating-stars label {
    font-size: 24px;
    color: #ddd;
    cursor: pointer;
    transition: color 0.3s;
}

.rating-stars input[type="radio"]:checked ~ label,
.rating-stars label:hover,
.rating-stars label:hover ~ label {
    color: #ffc107;
}

.add-review-form textarea {
    width: 100%;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    margin-bottom: 15px;
    resize: vertical;
    min-height: 100px;
}

.add-review-form button {
    background: #667eea;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

.login-prompt {
    text-align: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 30px;
}

.login-prompt a {
    color: #667eea;
    text-decoration: none;
    font-weight: bold;
}

.review-item {
    padding: 20px;
    border-bottom: 1px solid #eee;
    margin-bottom: 20px;
}

.review-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
}

.review-rating {
    color: #ffc107;
}

.review-date {
    color: #999;
    font-size: 14px;
    margin-left: auto;
}

.review-comment {
    color: #333;
    line-height: 1.6;
    margin-bottom: 15px;
}

.review-pros, .review-cons {
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
}

.review-pros {
    background: #d4edda;
    color: #155724;
}

.review-cons {
    background: #f8d7da;
    color: #721c24;
}

.no-reviews {
    text-align: center;
    padding: 40px;
    color: #666;
    background: #f8f9fa;
    border-radius: 8px;
}

.delivery-info {
    background: #f8f9fa;
    padding: 30px;
    border-radius: 8px;
}

.delivery-info h4 {
    margin-top: 25px;
    margin-bottom: 15px;
    color: #333;
}

.delivery-info ul {
    padding-left: 20px;
    margin-bottom: 20px;
}

.delivery-info li {
    margin-bottom: 8px;
}

.similar-products {
    margin-top: 60px;
}

.similar-products h2 {
    margin-bottom: 30px;
    font-size: 28px;
    color: #333;
}

.similar-products .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}
</style>
{% endblock %}